

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>网站设置</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <link rel="stylesheet" href="/admin/layuiadmin/layui/css/layui.css" media="all">
    <link rel="stylesheet" href="/admin/layuiadmin/style/admin.css" media="all">
</head>
<body>
<form class="layui-form" action="/admin/set/timesite" method="post">
    <div class="layui-fluid">
        <div class="layui-row layui-col-space15">
            <div class="layui-col-md12">
                <div class="layui-card">
                    <div class="layui-card-header">预约设置</div>
                    <div class="layui-card-body">

                        <div class="layui-form-item layui-form-text">
                            <label class="layui-form-label">预约时间</label>
                            <div class="layui-input-inline">
                                <input type="text" name="yue_strtime"  value="{:config('-timesite.yue_strtime')}" placeholder="预约时间" class="layui-input">
                            </div>
                            <div class="layui-form-mid layui-word-aux">一天中可以预约的时间段 （放号时间、可预约时间） 时间段用-隔开如08:00-20:00  不填则不限制</div>
                        </div>

                        <div class="layui-form-item layui-form-text">
                            <label class="layui-form-label">单人每天可预约</label>
                            <div class="layui-input-inline">
                                <input type="text" name="yue_dayno"  value="{:config('-timesite.yue_dayno')}" placeholder="单人每天可预约数量" class="layui-input">
                            </div>
                            <div class="layui-form-mid layui-word-aux">单个用户每天可预约几个订单 0为不限制</div>
                        </div>

                        <div class="layui-form-item layui-form-text">
                            <label class="layui-form-label">可预约天数</label>
                            <div class="layui-input-inline">
                                <input type="text" name="time_yuedayno"  value="{:config('-timesite.time_yuedayno')}" placeholder="可预约天数" class="layui-input">
                            </div>
                            <div class="layui-form-mid layui-word-aux">预约最长可以预约多少天 数字</div>
                        </div>

                        <div class="layui-form-item layui-form-text">
                            <label class="layui-form-label">提前提醒时间</label>
                            <div class="layui-input-inline">
                                <input type="text" name="time_advnotime"  value="{:config('-timesite.time_advnotime')}" placeholder="提前提醒时间" class="layui-input">
                            </div>
                            <div class="layui-form-mid layui-word-aux">订单预约开始提前多少小时提醒（小时）需要添加计划任务</div>
                        </div>

                        <div class="layui-form-item layui-form-text">
                            <label class="layui-form-label">未付款到期时间</label>
                            <div class="layui-input-inline">
                                <input type="text" name="time_paydaoqi"  value="{:config('-timesite.time_paydaoqi')}" placeholder="未付款到期时间" class="layui-input">
                            </div>
                            <div class="layui-form-mid layui-word-aux">未付款到期时间（分钟）需要添加计划任务</div>
                        </div>

                        <div class="layui-form-item layui-form-text">
                            <label class="layui-form-label">提前退款</label>
                            <div class="layui-input-inline">
                                <input type="text" name="yue_tuitime"  value="{:config('-timesite.yue_tuitime')}" placeholder="提前退款" class="layui-input">
                            </div>
                            <div class="layui-form-mid layui-word-aux">提前多少小时可以退款，必须为整数数字 可以提前多久退款（单位小时）</div>
                        </div>
                        <div class="layui-form-item layui-form-text">
                            <label class="layui-form-label">提前提示</label>
                            <div class="layui-input-inline">
                                <input type="text" name="yue_tuitimetit"  value="{:config('-timesite.yue_tuitimetit')}" placeholder="提前提示" class="layui-input">
                            </div>
                            <div class="layui-form-mid layui-word-aux">提前退款 不满足条件的提示文字，如：预约到期的前三天才可以退款</div>
                        </div>

                        <div class="layui-form-item layui-form-text">
                            <label class="layui-form-label">取消/退款</label>
                            <div class="layui-input-inline">
                                <input type="checkbox" lay-filter="switch2" value="{:config('-timesite.isqutuiord')}" lay-verify="required"  name="isqutuiord"
                                       {if condition="config('-timesite.isqutuiord')==1"} checked {/if} lay-skin="switch" lay-text="启用|关闭">
                            </div>
                            <div class="layui-form-mid layui-word-aux">是否可以取消或退款，开启则显示取消退款按钮</div>
                        </div>

                        
                        <div class="layui-form-item layui-form-text">
                            <label class="layui-form-label">项目限制</label>
                            <div class="layui-input-inline">
                                <input type="checkbox" lay-filter="switch1" value="{:config('-timesite.prominxno')}" lay-verify="required"  name="prominxno"
                                       {if condition="config('-timesite.prominxno')==1"} checked {/if} lay-skin="switch" lay-text="启用|关闭">
                            </div>
                            <div class="layui-form-mid layui-word-aux">开启后一个用户同一个时间段只能预约一个项目</div>
                        </div>

                        <div class="layui-form-item layui-form-text">
                            <label class="layui-form-label">开启自动</label>
                            <div class="layui-input-inline">
                                <input type="checkbox" lay-filter="switch3" value="{:config('-timesite.isopenauto')}" lay-verify="required"  name="isopenauto"
                                       {if condition="config('-timesite.isopenauto')==1"} checked {/if} lay-skin="switch" lay-text="启用|关闭">
                            </div>
                            <div class="layui-form-mid layui-word-aux">自动取消核销，是否开启，不开启则添加定时任务也不会生效</div>
                        </div>
                        <div class="layui-form-item">
                            <label class="layui-form-label">超期处理</label>
                            <div class="layui-input-block">
                                <input type="radio" name="autotype" value="1"  title="自动核销" {if condition="config('-timesite.autotype')==1"} checked {/if}>
                                <input type="radio" name="autotype" value="2" title="自动取消" {if condition="config('-timesite.autotype')==2"} checked {/if}>
                            </div>
                            <div class="layui-form-mid layui-word-aux">超期处理方式：1、自动核销（默认）  2、自动取消  需搭配下面的计划任务使用</div>
                        </div>
                        <div class="layui-form-item layui-form-text">
                            <label class="layui-form-label">超期时间</label>
                            <div class="layui-input-inline">
                                <input type="text" name="time_autohe"  value="{:config('-timesite.time_autohe')}" placeholder="核销时间、分钟" class="layui-input">
                            </div>
                            <div class="layui-form-mid layui-word-aux">多少分钟未核销自动核销或取消，默认30分钟 需搭配下面的计划任务使用</div>
                        </div>

                        <div class="layui-form-item layui-form-text">
                            <label class="layui-form-label">违约次数</label>
                            <div class="layui-input-inline">
                                <input type="text" name="time_weiyueno"  value="{:config('-timesite.time_weiyueno')}" placeholder="违约次数" class="layui-input">
                            </div>
                            <div class="layui-form-mid layui-word-aux">违约次数，超时未核销取消就是违约了，多少次做处罚</div>
                        </div>
                        <div class="layui-form-item layui-form-text">
                            <label class="layui-form-label">禁约天数</label>
                            <div class="layui-input-inline">
                                <input type="text" name="time_weiyueday"  value="{:config('-timesite.time_weiyueday')}" placeholder="禁约天数" class="layui-input">
                            </div>
                            <div class="layui-form-mid layui-word-aux">违约次数，处罚多久，多年不能预约，填30则 30天内不能预约，最后一次违约开始计算,不填则永久性</div>
                        </div>

                        <blockquote class="layui-elem-quote">到期取消计划任务：{:config('-appsite.app_domainname')?:'域名/'}resource/Order/guoqiord （1小时未付款自动取消）</blockquote>
                        <blockquote class="layui-elem-quote">预约即将开始计划任务：{:config('-appsite.app_domainname')?:'域名/'}resource/Order/settimeorder（即将开始订单）</blockquote>
                        <blockquote class="layui-elem-quote">到期未核销计划任务：{:config('-appsite.app_domainname')?:'域名/'}resource/Order/weiheord（查询未核销的订单）</blockquote>

                        <div class="layui-form-item">
                            <div class="layui-input-block">
                                <input type="submit" class="layui-btn" value="确认保存">
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
    </div>
</form>

<script src="/admin/layuiadmin/layui/layui.js"></script>
<script src="/admin/layuiadmin/jq/jquery.js"></script>
<script>
    layui.config({
        base: '/admin/layuiadmin/' //静态资源所在路径
    }).extend({
        index: 'lib/index' //主入口模块
    }).use(['index', 'form', 'upload','layedit'], function(){
        var $ = layui.$
            ,form = layui.form
            ,upload = layui.upload,layedit = layui.layedit;
        form.on('switch', function(data) {
            $(data.elem).attr('type', 'hidden').val(this.checked ? 1 : 0);
        });
        form.on('switch(switch1)', function(data) {
            $(data.elem).attr('type', 'hidden').val(this.checked ? 1 : 0);
        });
        form.on('switch(switch2)', function(data) {
            $(data.elem).attr('type', 'hidden').val(this.checked ? 1 : 0);
        });
        form.on('switch(switch3)', function(data) {
            $(data.elem).attr('type', 'hidden').val(this.checked ? 1 : 0);
        });
        upload.render({
            elem: '#layuiadmin-upload-useradmin' //绑定元素
            ,url: "{:url('/admin/Index/upload')}" //上传接口
            ,ext: 'jpg|png|gif'//限制文件
            ,done: function(res){
                //上传完毕回调
                $(this.item).prev("div").children("input").val(res.filename);
                document.getElementById('img1').src = res.filename;
                layer.msg("上传成功");
            }
            ,error: function(){
                //请求异常回调
            }
        });
        upload.render({
            elem: '#layuiadmin-upload-useradmin2' //绑定元素
            ,url: "{:url('/admin/Index/upload')}" //上传接口
            ,ext: 'jpg|png|gif'//限制文件
            ,done: function(res){
                //上传完毕回调
                $(this.item).prev("div").children("input").val(res.filename);
                document.getElementById('img2').src = res.filename;
                layer.msg("上传成功");
            }
            ,error: function(){
                //请求异常回调
            }

        });


    })
</script>
</body>
</html>