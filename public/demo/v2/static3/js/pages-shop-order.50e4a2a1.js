(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-shop-order"],{"3a71":function(t,i,e){"use strict";e("7a82");var n=e("4ea4").default;Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,e("e9c4"),e("acd8");var a=n(e("ade3")),o={data:function(){var t;return t={id:0,no:0,huimo:0,money:0,zmo:0,maxmo:0,reslist:[],list:[],longitude:""},(0,a.default)(t,"longitude",""),(0,a.default)(t,"name",""),(0,a.default)(t,"mobile",""),(0,a.default)(t,"message",""),(0,a.default)(t,"token",""),(0,a.default)(t,"kfurl",""),(0,a.default)(t,"appid",""),(0,a.default)(t,"address",""),(0,a.default)(t,"orderdata",""),(0,a.default)(t,"iswx",1),(0,a.default)(t,"cid",0),(0,a.default)(t,"isgx",0),t},onLoad:function(t){uni.removeStorageSync("couponData"),t.id&&(this.id=t.id),this.iswx=this.$iswx,this.GetToken()},onShow:function(){var t=uni.getStorageSync("couponData");t&&(this.cid=t.id,this.huocoupon())},methods:{huoqu:function(){var t=this;return jweixin.openAddress({success:function(i){var e=i.userName,n=(i.postalCode,i.provinceName),a=i.cityName,o=i.detailInfo,s=i.telNumber,u=n+a+o;t.form;t.name=e,t.mobile=s,t.address=u},fail:function(t){console.log(JSON.stringify(t))}}),!1},huocoupon:function(){var t=this,i=this;this.$api.huocoupon({token:this.token,id:this.id,cid:this.cid,money:this.zmo}).then((function(e){200==e.data.code?(i.huimo=e.data.data.coupon_money,t.zmo=parseFloat(t.money)-parseFloat(t.huimo)):uni.showToast({title:e.data.message,icon:"none",duration:2e3})}))},GetToken:function(){var t=this;uni.getStorage({key:"userData",success:function(i){t.token=i.data.vuex_token,t.getData()},fail:function(){return uni.removeStorage({key:"userData"}),uni.navigateTo({url:"/pages/login/login"}),!1}});var i="",e=uni.getStorageSync("cartvalue");if(e){this.reslist=e;for(var n=0,a=0;a<e.length;a++)i+=e[a].id+"-"+e[a].no,a<e.length-1&&(i+="_"),n+=e[a].money*e[a].no;this.money=n,this.zmo=n}this.orderdata=i},openwxkf:function(){var t=this.kfurl;this.appid;console.log("打开客服"),this.turl(1,t)},turl:function(t,i){1==t&&uni.navigateTo({url:"../index/weburl?url="+i})},getData:function(){var t=this;this.$api.shoporder({id:this.id,token:this.token}).then((function(i){t.name=i.data.data.name,t.mobile=i.data.data.mobile,t.appid=i.data.data.appid,t.kfurl=i.data.data.kfurl,t.isgx=i.data.data.isgx}))},addshop:function(){var t=this;return this.name?this.mobile?this.address?void this.$api.addshop({id:this.id,name:this.name,mobile:this.mobile,message:this.message,cid:this.cid,address:this.address,token:this.token,orderdata:this.orderdata}).then((function(i){if(200==i.data.code){var e=i.data.data.id;t.getpay(e)}else uni.showToast({title:i.data.message,icon:"none",duration:2e3})})):(uni.showToast({title:"收货人地址不能为空",icon:"none",duration:2e3}),!1):(uni.showToast({title:"收货人联系方式不能为空",icon:"none",duration:2e3}),!1):(uni.showToast({title:"收货人姓名不能为空",icon:"none",duration:2e3}),!1)},getpay:function(t){return 2!=this.iswx?(uni.showToast({title:"请在微信打开",icon:"none",duration:2e3}),!1):(this.onBridgeReady(t),!1)},onBridgeReady:function(t){var i=this;uni.request({url:i.$puburl+"resource/Payco/wxh5",data:{id:t,st:3,token:i.token},method:"GET",header:{"content-type":"application/json"},success:function(e){var n=e.data;WeixinJSBridge.invoke("getBrandWCPayRequest",n,(function(e){console.log("xsssss="+JSON.stringify(e)),"get_brand_wcpay_request:ok"==e.err_msg?(uni.showToast({title:"支付成功",icon:"none",duration:2e3}),setTimeout((function(){uni.navigateTo({url:"./payok?id="+t+"&money="+i.money})}),1e3)):uni.showToast({title:"支付失败",icon:"none",duration:2e3})}))}})},tiao:function(t){uni.navigateTo({url:t})},openditu:function(){var t=parseFloat(this.latitude),i=parseFloat(this.longitude);uni.openLocation({latitude:t,longitude:i,success:function(){console.log("success")},fail:function(t){console.log(JSON.stringify(t))}})},tindex:function(){uni.switchTab({url:"../index/index"})}},filters:{numFilter:function(t){if(t){var i=parseFloat(t).toFixed(2);return i}}}};i.default=o},"3b62":function(t,i,e){var n=e("24fb");i=n(!1),i.push([t.i,"uni-page-body[data-v-c973fe26]{background-color:#f6f6f6}body.?%PAGE?%[data-v-c973fe26]{background-color:#f6f6f6}uni-button[data-v-c973fe26]:after{border:none!important}.bar_btn[data-v-c973fe26]{width:%?600?%;height:%?90?%}.bar_btn2[data-v-c973fe26]{width:%?750?%;height:%?90?%}.bootli[data-v-c973fe26]{display:flex;justify-content:center;align-items:center;width:%?150?%}.bootvie[data-v-c973fe26]{width:%?750?%;height:%?90?%;position:fixed;bottom:%?0?%;left:%?0?%;z-index:9;border-top:%?1?% solid #f0f0f0}.zhanwei[data-v-c973fe26]{width:%?750?%;height:%?100?%}.navli[data-v-c973fe26]{width:%?200?%;height:%?90?%;color:#333;font-size:%?26?%;display:flex;justify-content:center;align-items:center}.jianju-5[data-v-c973fe26]{width:%?750?%;height:%?16?%;background-color:#f6f6f6}.navs[data-v-c973fe26]{height:%?90?%;background-color:#fff;border-bottom:%?2?% solid #f0f0f0}",""]),t.exports=i},"407a":function(t,i,e){"use strict";e.r(i);var n=e("e271"),a=e("8dff");for(var o in a)["default"].indexOf(o)<0&&function(t){e.d(i,t,(function(){return a[t]}))}(o);e("f62a");var s=e("f0c5"),u=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,"c973fe26",null,!1,n["a"],void 0);i["default"]=u.exports},"89af":function(t,i,e){var n=e("3b62");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=e("4f06").default;a("5da6a0a2",n,!0,{sourceMap:!1,shadowMode:!1})},"8dff":function(t,i,e){"use strict";e.r(i);var n=e("3a71"),a=e.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){e.d(i,t,(function(){return n[t]}))}(o);i["default"]=a.a},e271:function(t,i,e){"use strict";e.d(i,"b",(function(){return n})),e.d(i,"c",(function(){return a})),e.d(i,"a",(function(){}));var n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",[e("v-uni-view",{staticClass:"navs u-flex"},[e("v-uni-view",{staticClass:"u-flex-1 u-flex u-row-center u-col-center"},[e("v-uni-view",{staticClass:"navli zhuti_color_hong zhuti_border_bottom-1"},[e("v-uni-text",[t._v("商品详情")])],1)],1)],1),t._l(t.reslist,(function(i,n){return e("v-uni-view",{key:n,staticClass:"u-flex",staticStyle:{"background-color":"#FFFFFF",padding:"20rpx","border-bottom":"1rpx solid #F6F6F6"}},[e("v-uni-image",{staticStyle:{width:"80rpx",height:"80rpx"},attrs:{src:i.img,mode:""}}),e("v-uni-view",{staticClass:"u-flex-1"},[e("v-uni-view",{staticStyle:{width:"490rpx","margin-left":"20rpx"}},[e("v-uni-text",{staticClass:"u-font-26"},[t._v(t._s(i.title))])],1),e("v-uni-view",{staticClass:"u-flex-col",staticStyle:{width:"120rpx","text-align":"right","font-size":"26rpx"}},[e("v-uni-text",[t._v("￥"+t._s(i.money))]),e("v-uni-text",[t._v("x"+t._s(i.no))])],1)],1)],1)})),e("v-uni-view",{staticClass:"jianju-5"}),e("v-uni-view",{staticClass:"navs u-flex"},[e("v-uni-view",{staticClass:"u-flex-1 u-flex u-row-center u-col-center"},[e("v-uni-view",{staticClass:"navli zhuti_color_hong zhuti_border_bottom-1"},[e("v-uni-text",[t._v("平台配送")])],1)],1)],1),e("v-uni-view",{staticClass:"u-padding-20 u-bg-white u-flex",staticStyle:{"border-bottom":"1rpx solid #F6F6F6"}},[e("v-uni-view",{staticStyle:{width:"130rpx"}},[e("v-uni-text",{staticClass:"u-font-26 u-color-balck3"},[t._v("收货人")])],1),e("v-uni-view",{staticClass:"u-flex u-row-left u-col-center",staticStyle:{width:"480rpx"}},[e("v-uni-input",{staticStyle:{"font-size":"24rpx",color:"#333333",width:"450rpx"},attrs:{type:"text",placeholder:"请输入姓名"},model:{value:t.name,callback:function(i){t.name=i},expression:"name"}})],1),1==t.isgx?e("v-uni-view",{staticClass:"u-flex u-row-right u-col-center",staticStyle:{width:"100rpx"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.huoqu()}}},[e("v-uni-text",{staticClass:"u-font-24 zhuti_color"},[t._v("获取")])],1):t._e()],1),e("v-uni-view",{staticClass:"u-padding-20 u-bg-white u-flex",staticStyle:{"border-bottom":"1rpx solid #F6F6F6"}},[e("v-uni-view",{staticStyle:{width:"130rpx"}},[e("v-uni-text",{staticClass:"u-font-26 u-color-balck3"},[t._v("联系电话")])],1),e("v-uni-view",{staticClass:"u-flex u-row-left u-col-center",staticStyle:{width:"480rpx"}},[e("v-uni-input",{staticStyle:{"font-size":"24rpx",color:"#333333",width:"450rpx"},attrs:{type:"text",placeholder:"请输入手机号"},model:{value:t.mobile,callback:function(i){t.mobile=i},expression:"mobile"}})],1),1==t.isgx?e("v-uni-view",{staticClass:"u-flex u-row-right u-col-center",staticStyle:{width:"100rpx"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.huoqu()}}},[e("v-uni-text",{staticClass:"u-font-24 zhuti_color"},[t._v("获取")])],1):t._e()],1),e("v-uni-view",{staticClass:"u-padding-20 u-bg-white u-flex",staticStyle:{"border-bottom":"1rpx solid #F6F6F6"}},[e("v-uni-view",{staticStyle:{width:"130rpx"}},[e("v-uni-text",{staticClass:"u-font-26 u-color-balck3"},[t._v("收货地址")])],1),e("v-uni-view",{staticClass:"u-flex u-row-left u-col-center",staticStyle:{width:"480rpx"}},[e("v-uni-input",{staticStyle:{"font-size":"24rpx",color:"#333333",width:"450rpx"},attrs:{type:"text",placeholder:"请输入收货地址"},model:{value:t.address,callback:function(i){t.address=i},expression:"address"}})],1),1==t.isgx?e("v-uni-view",{staticClass:"u-flex u-row-right u-col-center",staticStyle:{width:"100rpx"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.huoqu()}}},[e("v-uni-text",{staticClass:"u-font-24 zhuti_color"},[t._v("获取")])],1):t._e()],1),e("v-uni-view",{staticClass:"msgs u-padding-20 u-bg-white"},[e("v-uni-input",{staticStyle:{"font-size":"26rpx",color:"#333333"},attrs:{type:"text",placeholder:"给商家留言"},model:{value:t.message,callback:function(i){t.message=i},expression:"message"}})],1),e("v-uni-view",{staticClass:"jianju-5"}),e("v-uni-view",{staticClass:"u-padding-20 u-bg-white u-flex",staticStyle:{"border-bottom":"1rpx solid #F0F0F0"}},[e("v-uni-view",{staticStyle:{width:"130rpx"}},[e("v-uni-text",{staticClass:"u-font-24 u-color-balck6"},[t._v("付款方式")])],1)],1),e("v-uni-view",{staticClass:"u-padding-20 u-bg-white u-flex"},[e("v-uni-view",{staticStyle:{width:"60rpx"}},[e("i",{staticClass:"icon u-font-42 zhuti_color"},[t._v("")])]),e("v-uni-view",{staticStyle:{width:"620rpx"}},[e("v-uni-text",{staticClass:"u-font-26 u-color-balck3"},[t._v("微信支付")])],1),e("v-uni-view",{staticStyle:{width:"40rpx"}},[e("i",{staticClass:"icon u-font-36 zhuti_color"},[t._v("")])])],1),e("v-uni-view",{staticClass:"jianju-5"}),e("v-uni-view",{staticStyle:{padding:"0 20rpx","background-color":"#FFFFFF"}},[e("v-uni-view",{staticStyle:{width:"710rpx",display:"flex","flex-direction":"row","justify-content":"space-between",padding:"20rpx 0","border-bottom":"1rpx solid #F6F6F6"}},[e("v-uni-text",{staticClass:"u-color-balck3 u-font-28"},[t._v("订单总额")]),e("v-uni-text",{staticClass:"u-color-balck3 u-font-28"},[t._v("￥"+t._s(t.money))])],1)],1),e("v-uni-view",{staticClass:"zhanwei"}),t.appid?e("v-uni-view",{staticClass:"bootvie u-flex u-col-center u-bg-white u-row-between"},[e("v-uni-view",{staticClass:"u-flex"},[e("v-uni-view",{staticClass:"bootli u-flex-col",staticStyle:{background:"none",border:"none",height:"80rpx","line-height":"40rpx",outline:"none"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.openwxkf()}}},[e("i",{staticClass:"icon u-color-balck9 u-font-40 u-margin-top-10"},[t._v("")]),e("v-uni-text",{staticClass:"u-font-24 u-color-balck3 u-margin-top-5"},[t._v("客服")])],1)],1),e("div",{staticClass:"bar_btn zhuti_bg u-flex u-row-center u-col-center",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.addshop()}}},[e("span",{staticClass:"u-font-32 u-color-white u-font-bold"},[t._v("确认支付￥"+t._s(t._f("numFilter")(t.zmo)))])])],1):t._e(),t.appid?t._e():e("v-uni-view",{staticClass:"bootvie u-flex u-col-center u-bg-white u-row-center"},[e("div",{staticClass:"bar_btn2 zhuti_bg u-flex u-row-center u-col-center",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.addshop()}}},[e("span",{staticClass:"u-font-32 u-color-white u-font-bold"},[t._v("确认支付￥"+t._s(t._f("numFilter")(t.zmo)))])])])],2)},a=[]},f62a:function(t,i,e){"use strict";var n=e("89af"),a=e.n(n);a.a}}]);